<p-toast></p-toast>
<p-confirmPopup></p-confirmPopup>

<div *ngIf="isLoading" style="text-align: center;">
    <app-loading-spinner></app-loading-spinner>
</div>

<div class="tituloCadastro">SUGESTÕES</div>
<div class="divSugestoes">
    <p-dataView [value]="Sugestoes">
        <ng-template let-msg pTemplate="listItem">
            <div class="itemMsg">
                <div style="display: inline;" class="itemCab">{{msg.MsgEmail}} - {{msg.DataInc | date : 'dd/MM/yyyy HH:mm'}}</div>
                <span>&nbsp;&nbsp;&nbsp;</span>
                <a (click)="confirm($event,msg)" title="excluir sugestão" *ngIf="msg.MsgEmail == UsuEmail">
                    <i style="color: red;" class="fas fa-trash-alt" aria-hidden="true"></i>
                </a>  
                <div [innerHtml]="msg.MsgTexto"></div>
            </div>
        </ng-template>
    </p-dataView>
</div>
<hr>

<form [formGroup]="dadosForm" (ngSubmit)="onSubmit()" *ngIf="!isLoading">
    <div class="form-group">
        <div class="row">
            <div class="col-lg-12 col-md-12">
                <label for="texto">Sugestão</label>
                <p-editor id="texto" formControlName="texto" [style]="{'height':'100px'}">
                    <ng-template pTemplate="header">
                        <span class="ql-formats">
                            <button type="button" class="ql-bold" aria-label="Bold"></button>
                            <button type="button" class="ql-italic" aria-label="Italic"></button>
                            <button type="button" class="ql-underline" aria-label="Underline"></button>
                        </span>
                    </ng-template>
                </p-editor>
            </div>
        </div>
        <div class="row editButtonSystem">            
            <div class="floatLeft col-sm-1">
                <button
                  type="submit"
                  class="btn btn-success"
                  [disabled]="!dadosForm.valid">Enviar</button>
            </div>  
        </div>
    </div>
  </form>



